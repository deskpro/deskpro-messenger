webpackJsonp([1],{2468:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_5_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_5_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__),__WEBPACK_IMPORTED_MODULE_6_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_6_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_prop_types__),__WEBPACK_IMPORTED_MODULE_7_classnames__=__webpack_require__(52),__WEBPACK_IMPORTED_MODULE_7_classnames___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_classnames__),__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg__=__webpack_require__(548),__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg__),__WEBPACK_IMPORTED_MODULE_9_react_intl__=__webpack_require__(74),__WEBPACK_IMPORTED_MODULE_10__utils_asset__=__webpack_require__(152),__WEBPACK_IMPORTED_MODULE_11__core_ConfigContext__=__webpack_require__(114),Header=function(_PureComponent){function Header(){return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this,Header),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this,(Header.__proto__||__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Header)).apply(this,arguments))}return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Header,_PureComponent),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Header,[{key:"render",value:function render(){var _props=this.props,intl=_props.intl,icon=_props.icon,themeVars=_props.themeVars,headerImage=icon||(themeVars.copyfree?null:Object(__WEBPACK_IMPORTED_MODULE_10__utils_asset__.a)("img/dp-logo-white.svg"));return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("div",{className:__WEBPACK_IMPORTED_MODULE_7_classnames___default()("dpmsg-ScreenHeader",{"dpmsg-ScreenHeader-noLogo":!headerImage})},headerImage&&__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("div",{className:"dpmsg-ScreenHeaderLogo"},"svg"===headerImage.substr(-3)?__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg___default.a,{src:headerImage,alt:""}):__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("img",{src:headerImage,alt:""})),__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("span",{className:"dpmsg-ScreenHeaderTitle"},intl.formatMessage({id:"helpcenter.messenger.greeting"})))}}]),Header}(__WEBPACK_IMPORTED_MODULE_5_react__.PureComponent);Header.propTypes={icon:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.string,themeVars:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.object.isRequired},Header.defaultProps={icon:""},__webpack_exports__.a=Object(__WEBPACK_IMPORTED_MODULE_9_react_intl__.c)(Object(__WEBPACK_IMPORTED_MODULE_11__core_ConfigContext__.d)(Header)),Header.__docgenInfo={description:"",displayName:"Header",props:{icon:{type:{name:"string"},required:!1,description:"",defaultValue:{value:"''",computed:!1}},themeVars:{type:{name:"object"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Header.jsx"]={name:"Header",docgenInfo:Header.__docgenInfo,path:"src/components/ui/Header.jsx"})},974:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__=__webpack_require__(29),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_7_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_7_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_react__),__WEBPACK_IMPORTED_MODULE_8_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_8_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_prop_types__),__WEBPACK_IMPORTED_MODULE_9_react_redux__=__webpack_require__(55),__WEBPACK_IMPORTED_MODULE_10_redux__=__webpack_require__(126),__WEBPACK_IMPORTED_MODULE_11_react_intl__=__webpack_require__(74),__WEBPACK_IMPORTED_MODULE_12__components_core_ScreenContent__=__webpack_require__(972),__WEBPACK_IMPORTED_MODULE_13__components_chat_Chat__=__webpack_require__(1339),__WEBPACK_IMPORTED_MODULE_14__components_core_Block__=__webpack_require__(971),__WEBPACK_IMPORTED_MODULE_15__components_core_ConfigContext__=__webpack_require__(114),__WEBPACK_IMPORTED_MODULE_16__modules_chat__=__webpack_require__(85),__WEBPACK_IMPORTED_MODULE_17__modules_guest__=__webpack_require__(115),__WEBPACK_IMPORTED_MODULE_18__modules_info__=__webpack_require__(127),__WEBPACK_IMPORTED_MODULE_19__components_ui_Header__=__webpack_require__(2468),ChatScreen=function(_PureComponent){function ChatScreen(){var _ref,_temp,_this,_ret;__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_classCallCheck___default()(this,ChatScreen);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(this,(_ref=ChatScreen.__proto__||__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_get_prototype_of___default()(ChatScreen)).call.apply(_ref,[this].concat(args))),_this.state={endChatBlock:!1},_this.handleSendMessage=function(message){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat.message";if(message){var messageModel=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({origin:"user",type:type},"string"==typeof message?{message:message}:message);_this.props.sendMessage(messageModel,_this.props.chatData)}},_this.onCancelEndChat=function(){_this.props.toggleChatEndBlock(!1)},_this.handleEndChat=function(){_this.props.endChatMessage(_this.props.chatData)},_ret=_temp,__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_possibleConstructorReturn___default()(_this,_ret)}return __WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_inherits___default()(ChatScreen,_PureComponent),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_createClass___default()(ChatScreen,[{key:"componentDidMount",value:function componentDidMount(){var _props=this.props,chatData=_props.chatData,chatOpened=_props.chatOpened;chatData.id&&chatOpened(chatData)}},{key:"render",value:function render(){var _props2=this.props,widget=_props2.widget,departments=_props2.departments,chatConfig=_props2.chatConfig,chatData=_props2.chatData,intl=_props2.intl,user=_props2.user,agent=_props2.agent,messages=_props2.messages,typing=_props2.typing,maxHeight=this.props.contentSize.maxHeight,department=chatConfig.department&&departments[chatConfig.department]?departments[chatConfig.department]:{};department.title||(department=departments[__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(departments)[0]]);var chat=__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({},chatData,{assigned:this.props.chatAssigned});return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_react__.Fragment,null,__WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_19__components_ui_Header__.a,{icon:widget.icon.download_url}),__WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14__components_core_Block__.a,{title:intl.formatMessage({id:"helpcenter.messenger.chat_header_title",defaultMessage:"{department} conversation"},{department:department.title}),style:{minHeight:maxHeight},className:"Block--chat"},__WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13__components_chat_Chat__.a,{messages:messages,onSendMessage:this.handleSendMessage,onEndChat:this.handleEndChat,onCancelEndChat:this.onCancelEndChat,typing:typing,user:user,agent:agent,chat:chat,chatConfig:chatConfig})))}}]),ChatScreen}(__WEBPACK_IMPORTED_MODULE_7_react__.PureComponent);ChatScreen.propTypes={agent:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.object,user:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.object,match:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.shape({params:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.shape({chatId:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.string.isRequired})}),chatData:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.shape({fromScreen:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.string.isRequired}).isRequired,chatConfig:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.shape({department:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.number.isRequired,noAnswerBehavior:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.oneOf(["","save_ticket","create_ticket"])}).isRequired,departments:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.object.isRequired,messages:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.array,typing:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.oneOfType([__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.object,__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.bool]),sendMessage:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.func.isRequired,endChatMessage:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.func.isRequired,chatOpened:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.func.isRequired,contentSize:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.shape({animating:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.bool,height:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.number,maxHeight:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.number,fullHeight:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.bool})},ChatScreen.defaultProps={messages:[],typing:null};__webpack_exports__.default=Object(__WEBPACK_IMPORTED_MODULE_10_redux__.d)(__WEBPACK_IMPORTED_MODULE_11_react_intl__.c,__WEBPACK_IMPORTED_MODULE_15__components_core_ConfigContext__.d,__WEBPACK_IMPORTED_MODULE_12__components_core_ScreenContent__.withScreenContentSize,Object(__WEBPACK_IMPORTED_MODULE_9_react_redux__.b)(function mapStateToProps(state){return{user:Object(__WEBPACK_IMPORTED_MODULE_17__modules_guest__.d)(state),chatData:Object(__WEBPACK_IMPORTED_MODULE_16__modules_chat__.n)(state),agent:Object(__WEBPACK_IMPORTED_MODULE_16__modules_chat__.m)(state),messages:Object(__WEBPACK_IMPORTED_MODULE_16__modules_chat__.p)(state),typing:Object(__WEBPACK_IMPORTED_MODULE_16__modules_chat__.q)(state),departments:Object(__WEBPACK_IMPORTED_MODULE_18__modules_info__.g)(state),chatAssigned:Object(__WEBPACK_IMPORTED_MODULE_16__modules_chat__.r)(state)}},{sendMessage:__WEBPACK_IMPORTED_MODULE_16__modules_chat__.v,endChatMessage:__WEBPACK_IMPORTED_MODULE_16__modules_chat__.k,chatOpened:__WEBPACK_IMPORTED_MODULE_16__modules_chat__.g,toggleChatEndBlock:__WEBPACK_IMPORTED_MODULE_16__modules_chat__.w}),function mapProps(WrappedComponent){return function(props){var chatConfig=props.chatData&&props.chatData.fromScreen?props.screens[props.chatData.fromScreen]:{};return __WEBPACK_IMPORTED_MODULE_7_react___default.a.createElement(WrappedComponent,__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_extends___default()({},props,{chatConfig:chatConfig}))}})(ChatScreen),ChatScreen.__docgenInfo={description:"",displayName:"ChatScreen",props:{agent:{type:{name:"object"},required:!1,description:""},user:{type:{name:"object"},required:!1,description:""},match:{type:{name:"shape",value:{params:{name:"shape",value:{chatId:{name:"string",required:!0}},required:!1}}},required:!1,description:""},chatData:{type:{name:"shape",value:{fromScreen:{name:"string",required:!0}}},required:!0,description:""},chatConfig:{type:{name:"shape",value:{department:{name:"number",required:!0},noAnswerBehavior:{name:"enum",value:[{value:"''",computed:!1},{value:"'save_ticket'",computed:!1},{value:"'create_ticket'",computed:!1}],required:!1}}},required:!0,description:""},departments:{type:{name:"object"},required:!0,description:""},messages:{type:{name:"array"},required:!1,description:"",defaultValue:{value:"[]",computed:!1}},typing:{type:{name:"union",value:[{name:"object"},{name:"bool"}]},required:!1,description:"",defaultValue:{value:"null",computed:!1}},sendMessage:{type:{name:"func"},required:!0,description:""},endChatMessage:{type:{name:"func"},required:!0,description:""},chatOpened:{type:{name:"func"},required:!0,description:""},contentSize:{type:{name:"shape",value:{animating:{name:"bool",required:!1},height:{name:"number",required:!1},maxHeight:{name:"number",required:!1},fullHeight:{name:"bool",required:!1}}},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/ChatScreen.jsx"]={name:"ChatScreen",docgenInfo:ChatScreen.__docgenInfo,path:"src/screens/ChatScreen.jsx"})}});