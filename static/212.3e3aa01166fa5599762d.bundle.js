webpackJsonp([212],{1338:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_6_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_6_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__),__WEBPACK_IMPORTED_MODULE_7_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_7_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_prop_types__),__WEBPACK_IMPORTED_MODULE_8_react_redux__=__webpack_require__(53),__WEBPACK_IMPORTED_MODULE_9_redux__=__webpack_require__(126),__WEBPACK_IMPORTED_MODULE_10_react_intl__=__webpack_require__(74),__WEBPACK_IMPORTED_MODULE_11__utils_common__=__webpack_require__(1332),__WEBPACK_IMPORTED_MODULE_12__components_core_Block__=__webpack_require__(967),__WEBPACK_IMPORTED_MODULE_13__deskpro_portal_components__=__webpack_require__(1331),__WEBPACK_IMPORTED_MODULE_14__modules_tickets__=(__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13__deskpro_portal_components__),__webpack_require__(1339)),__WEBPACK_IMPORTED_MODULE_15__modules_info__=__webpack_require__(171),__WEBPACK_IMPORTED_MODULE_16__modules_guest__=__webpack_require__(114),__WEBPACK_IMPORTED_MODULE_17__components_ui_Header__=__webpack_require__(2462),__WEBPACK_IMPORTED_MODULE_18__components_core_ConfigContext__=__webpack_require__(113),__WEBPACK_IMPORTED_MODULE_19__components_core_ScreenContent__=__webpack_require__(968),transMessages_name={id:"helpcenter.messenger.tickets_form_name",defaultMessage:"Name"},transMessages_email={id:"helpcenter.messenger.tickets_form_email",defaultMessage:"Email"},transMessages_department={id:"helpcenter.general.department",defaultMessage:"Department"},transMessages_subject={id:"helpcenter.widget.tickets_form_label_subject",defaultMessage:"Subject"},transMessages_message={id:"helpcenter.messenger.tickets_form_message",defaultMessage:"Message"},transMessages_product={id:"helpcenter.messenger.tickets_form_product",defaultMessage:"Product"},transMessages_priority={id:"helpcenter.messenger.tickets_form_priority",defaultMessage:"Priority"},transMessages_category={id:"helpcenter.general.category",defaultMessage:"Category"},transMessages_submit={id:"helpcenter.messenger.tickets_form_submit",defaultMessage:"Submit"},transMessages_addAttachment={id:"helpcenter.messenger.tickets_form_add_attachment",defaultMessage:"Add attachment"},transMessages_dragNDrop={id:"helpcenter.general.drag_and_drop",defaultMessage:"Drag and drop"},transMessages_or={id:"helpcenter.messenger.tickets_form_or",defaultMessage:"or"},transMessages_chooseAFile={id:"helpcenter.general.form_choose_file",defaultMessage:"Choose a file"},transMessages_chooseFiles={id:"helpcenter.general.form_choose_files",defaultMessage:"Choose files"},transMessages_select={id:"helpcenter.messenger.tickets_form_select",defaultMessage:"Select"},transMessages_back={id:"helpcenter.messenger.tickets_form_back",defaultMessage:"Back"},TicketFormScreen=function(_React$Component){function TicketFormScreen(){var _ref,_temp,_this,_ret;__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_classCallCheck___default()(this,TicketFormScreen);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(this,(_ref=TicketFormScreen.__proto__||__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_get_prototype_of___default()(TicketFormScreen)).call.apply(_ref,[this].concat(args))),_this.onSubmit=function(values){return _this.props.cacheForm({values:{}}),_this.props.saveTicket(values)},_this.cacheForm=function(form){_this.props.cacheForm(form)},_ret=_temp,__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_possibleConstructorReturn___default()(_this,_ret)}return __WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_inherits___default()(TicketFormScreen,_React$Component),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_createClass___default()(TicketFormScreen,[{key:"componentDidMount",value:function componentDidMount(){this.props.newTicket()}},{key:"componentDidUpdate",value:function componentDidUpdate(){var _this2=this;!0===this.props.ticketSaving&&setTimeout(function(){return _this2.props.contentSize.scrollArea.current.scrollTop()},50)}},{key:"render",value:function render(){var _props=this.props,intl=_props.intl,formConfig=_props.formConfig,widget=_props.widget,uploadTo=_props.uploadTo,departments=_props.departments,priorities=_props.priorities,department=_props.department,ticketSaved=_props.ticketSaved,ticketSaving=_props.ticketSaving,errors=_props.errors,user=_props.user,formCache=_props.formCache,isUserSet=_props.isUserSet,converted=formConfig.map(function(d){return d.fields&&d.fields.forEach(function(f,i){"person"===f.field_type&&(d.fields[i].is_disabled=isUserSet)}),d}),immutableLayout=Object(__WEBPACK_IMPORTED_MODULE_11__utils_common__.a)(converted);return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6_react__.Fragment,null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_17__components_ui_Header__.a,{icon:widget.icon.download_url}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12__components_core_Block__.a,{title:intl.formatMessage({id:"helpcenter.messenger.tickets_form_header",defaultMessage:"New Ticket"})},!ticketSaved&&errors&&errors.general&&__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement("div",{className:"dp-pc_field"},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement("span",{className:"dp-pc_error_message"},errors.general)),ticketSaving&&__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement("div",{className:"dp-pc_field"},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_react_intl__.a,{id:"helpcenter.messenger.tickets.form.saving",defaultMessage:"We're saving your ticket. Please wait"})),!ticketSaved&&__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13__deskpro_portal_components__.TicketForm,{initialValues:__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({},formCache,{person:user}),deskproLayout:immutableLayout,departmentPropName:"department",departments:Object(__WEBPACK_IMPORTED_MODULE_11__utils_common__.a)(departments),priorities:Object(__WEBPACK_IMPORTED_MODULE_11__utils_common__.a)(priorities),department:formCache.department||department,fileUploadUrl:uploadTo,csrfToken:"not_used",onSubmit:this.onSubmit,onChange:this.cacheForm,errors:errors,languageId:parseInt(this.props.language.id,10),i18n:{name:intl.formatMessage(transMessages_name),email:intl.formatMessage(transMessages_email),department:intl.formatMessage(transMessages_department),subject:intl.formatMessage(transMessages_subject),message:intl.formatMessage(transMessages_message),product:intl.formatMessage(transMessages_product),priority:intl.formatMessage(transMessages_priority),category:intl.formatMessage(transMessages_category),submit:intl.formatMessage(transMessages_submit),addAttachment:intl.formatMessage(transMessages_addAttachment),dragNDrop:intl.formatMessage(transMessages_dragNDrop),or:intl.formatMessage(transMessages_or),chooseAFile:intl.formatMessage(transMessages_chooseAFile),chooseFiles:intl.formatMessage(transMessages_chooseFiles),select:intl.formatMessage(transMessages_select),back:intl.formatMessage(transMessages_back)}}),ticketSaved&&!ticketSaving&&[__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement("div",{className:"dpmsg-BlockInnerIcon"},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement("i",{className:"dpmsg-Icon dpmsg-Icon--Round dpmsg-IconRocket"})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement("div",{className:"dpmsg-BlockInnerHeader"},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_react_intl__.a,{id:"helpcenter.messenger.tickets_form_thanks_header",defaultMessage:"Your request on its way"})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement("div",{className:"dpmsg-BlockInnerContent"},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_react_intl__.a,{id:"helpcenter.messenger.tickets_form_thanks",defaultMessage:"Thank you for contacting us. One of our team will be in touch with you via email."}))]))}}]),TicketFormScreen}(__WEBPACK_IMPORTED_MODULE_6_react___default.a.Component);TicketFormScreen.propTypes={formConfig:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.array.isRequired,uploadTo:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.string.isRequired,saveTicket:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.func.isRequired,newTicket:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.func.isRequired,cacheForm:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.func.isRequired,departments:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.object.isRequired,intl:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.object.isRequired,user:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.object,language:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.object,userId:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.bool,ticketSaved:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.bool,ticketSaving:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.bool,formCache:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.object,widget:__WEBPACK_IMPORTED_MODULE_7_prop_types___default.a.object},TicketFormScreen.defaultProps={ticketSaved:!1,ticketSaving:!1,formCache:{},user:{name:"",email:""},language:{}},__webpack_exports__.default=Object(__WEBPACK_IMPORTED_MODULE_9_redux__.d)(__WEBPACK_IMPORTED_MODULE_18__components_core_ConfigContext__.d,__WEBPACK_IMPORTED_MODULE_19__components_core_ScreenContent__.withScreenContentSize,Object(__WEBPACK_IMPORTED_MODULE_8_react_redux__.b)(function mapStateToProps(state){return{departments:Object(__WEBPACK_IMPORTED_MODULE_15__modules_info__.h)(state),priorities:Object(__WEBPACK_IMPORTED_MODULE_15__modules_info__.i)(state),ticketSaved:Object(__WEBPACK_IMPORTED_MODULE_14__modules_tickets__.e)(state),ticketSaving:Object(__WEBPACK_IMPORTED_MODULE_14__modules_tickets__.f)(state),formCache:Object(__WEBPACK_IMPORTED_MODULE_14__modules_tickets__.d)(state),user:Object(__WEBPACK_IMPORTED_MODULE_16__modules_guest__.c)(state),isUserSet:Object(__WEBPACK_IMPORTED_MODULE_16__modules_guest__.g)(state),errors:Object(__WEBPACK_IMPORTED_MODULE_14__modules_tickets__.c)(state)}},{saveTicket:__WEBPACK_IMPORTED_MODULE_14__modules_tickets__.h,newTicket:__WEBPACK_IMPORTED_MODULE_14__modules_tickets__.g,cacheForm:__WEBPACK_IMPORTED_MODULE_14__modules_tickets__.a}),__WEBPACK_IMPORTED_MODULE_10_react_intl__.c)(TicketFormScreen),TicketFormScreen.__docgenInfo={description:"",displayName:"TicketFormScreen",props:{formConfig:{type:{name:"array"},required:!0,description:""},uploadTo:{type:{name:"string"},required:!0,description:""},saveTicket:{type:{name:"func"},required:!0,description:""},newTicket:{type:{name:"func"},required:!0,description:""},cacheForm:{type:{name:"func"},required:!0,description:""},departments:{type:{name:"object"},required:!0,description:""},intl:{type:{name:"object"},required:!0,description:""},user:{type:{name:"object"},required:!1,description:"",defaultValue:{value:"{name: '', email: ''}",computed:!1}},language:{type:{name:"object"},required:!1,description:"",defaultValue:{value:"{}",computed:!1}},userId:{type:{name:"bool"},required:!1,description:""},ticketSaved:{type:{name:"bool"},required:!1,description:"",defaultValue:{value:"false",computed:!1}},ticketSaving:{type:{name:"bool"},required:!1,description:"",defaultValue:{value:"false",computed:!1}},formCache:{type:{name:"object"},required:!1,description:"",defaultValue:{value:"{}",computed:!1}},widget:{type:{name:"object"},required:!1,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/screens/TicketFormScreen.jsx"]={name:"TicketFormScreen",docgenInfo:TicketFormScreen.__docgenInfo,path:"src/screens/TicketFormScreen.jsx"})},2462:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_5_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_5_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__),__WEBPACK_IMPORTED_MODULE_6_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_6_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_prop_types__),__WEBPACK_IMPORTED_MODULE_7_classnames__=__webpack_require__(54),__WEBPACK_IMPORTED_MODULE_7_classnames___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_classnames__),__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg__=__webpack_require__(546),__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg__),__WEBPACK_IMPORTED_MODULE_9_react_intl__=__webpack_require__(74),__WEBPACK_IMPORTED_MODULE_10__utils_asset__=__webpack_require__(151),__WEBPACK_IMPORTED_MODULE_11__core_ConfigContext__=__webpack_require__(113),Header=function(_PureComponent){function Header(){return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this,Header),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this,(Header.__proto__||__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Header)).apply(this,arguments))}return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Header,_PureComponent),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Header,[{key:"render",value:function render(){var _props=this.props,intl=_props.intl,icon=_props.icon,themeVars=_props.themeVars,headerImage=icon||(themeVars.copyfree?null:Object(__WEBPACK_IMPORTED_MODULE_10__utils_asset__.a)("img/dp-logo-white.svg"));return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("div",{className:__WEBPACK_IMPORTED_MODULE_7_classnames___default()("dpmsg-ScreenHeader",{"dpmsg-ScreenHeader-noLogo":!headerImage})},headerImage&&__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("div",{className:"dpmsg-ScreenHeaderLogo"},"svg"===headerImage.substr(-3)?__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg___default.a,{src:headerImage,alt:""}):__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("img",{src:headerImage,alt:""})),__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("span",{className:"dpmsg-ScreenHeaderTitle"},intl.formatMessage({id:"helpcenter.messenger.greeting"})))}}]),Header}(__WEBPACK_IMPORTED_MODULE_5_react__.PureComponent);Header.propTypes={icon:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.string,themeVars:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.object.isRequired},Header.defaultProps={icon:""},__webpack_exports__.a=Object(__WEBPACK_IMPORTED_MODULE_9_react_intl__.c)(Object(__WEBPACK_IMPORTED_MODULE_11__core_ConfigContext__.d)(Header)),Header.__docgenInfo={description:"",displayName:"Header",props:{icon:{type:{name:"string"},required:!1,description:"",defaultValue:{value:"''",computed:!1}},themeVars:{type:{name:"object"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Header.jsx"]={name:"Header",docgenInfo:Header.__docgenInfo,path:"src/components/ui/Header.jsx"})}});