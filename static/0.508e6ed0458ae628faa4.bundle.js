webpackJsonp([0],{2468:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_5_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_5_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__),__WEBPACK_IMPORTED_MODULE_6_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_6_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_prop_types__),__WEBPACK_IMPORTED_MODULE_7_classnames__=__webpack_require__(52),__WEBPACK_IMPORTED_MODULE_7_classnames___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_classnames__),__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg__=__webpack_require__(548),__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg__),__WEBPACK_IMPORTED_MODULE_9_react_intl__=__webpack_require__(74),__WEBPACK_IMPORTED_MODULE_10__utils_asset__=__webpack_require__(152),__WEBPACK_IMPORTED_MODULE_11__core_ConfigContext__=__webpack_require__(114),Header=function(_PureComponent){function Header(){return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this,Header),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this,(Header.__proto__||__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(Header)).apply(this,arguments))}return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(Header,_PureComponent),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(Header,[{key:"render",value:function render(){var _props=this.props,intl=_props.intl,icon=_props.icon,themeVars=_props.themeVars,headerImage=icon||(themeVars.copyfree?null:Object(__WEBPACK_IMPORTED_MODULE_10__utils_asset__.a)("img/dp-logo-white.svg"));return __WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("div",{className:__WEBPACK_IMPORTED_MODULE_7_classnames___default()("dpmsg-ScreenHeader",{"dpmsg-ScreenHeader-noLogo":!headerImage})},headerImage&&__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("div",{className:"dpmsg-ScreenHeaderLogo"},"svg"===headerImage.substr(-3)?__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_react_inlinesvg___default.a,{src:headerImage,alt:""}):__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("img",{src:headerImage,alt:""})),__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement("span",{className:"dpmsg-ScreenHeaderTitle"},intl.formatMessage({id:"helpcenter.messenger.greeting"})))}}]),Header}(__WEBPACK_IMPORTED_MODULE_5_react__.PureComponent);Header.propTypes={icon:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.string,themeVars:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.object.isRequired},Header.defaultProps={icon:""},__webpack_exports__.a=Object(__WEBPACK_IMPORTED_MODULE_9_react_intl__.c)(Object(__WEBPACK_IMPORTED_MODULE_11__core_ConfigContext__.d)(Header)),Header.__docgenInfo={description:"",displayName:"Header",props:{icon:{type:{name:"string"},required:!1,description:"",defaultValue:{value:"''",computed:!1}},themeVars:{type:{name:"object"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/Header.jsx"]={name:"Header",docgenInfo:Header.__docgenInfo,path:"src/components/ui/Header.jsx"})},2502:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_5_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_5_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_react__),__WEBPACK_IMPORTED_MODULE_6_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_6_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_prop_types__),__WEBPACK_IMPORTED_MODULE_7_react_router_dom__=__webpack_require__(153),__WEBPACK_IMPORTED_MODULE_8__core_Frame__=__webpack_require__(495),__WEBPACK_IMPORTED_MODULE_9__core_ConfigContext__=__webpack_require__(114),__WEBPACK_IMPORTED_MODULE_10__BotBubble__=__webpack_require__(1340),__WEBPACK_IMPORTED_MODULE_11_redux__=__webpack_require__(126),__WEBPACK_IMPORTED_MODULE_12__core_ScreenContent__=__webpack_require__(972),__WEBPACK_IMPORTED_MODULE_13_react_redux__=__webpack_require__(55),__WEBPACK_IMPORTED_MODULE_14__modules_app__=__webpack_require__(94),PromptMessage=function(_PureComponent){function PromptMessage(){return __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_classCallCheck___default()(this,PromptMessage),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_possibleConstructorReturn___default()(this,(PromptMessage.__proto__||__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_get_prototype_of___default()(PromptMessage)).apply(this,arguments))}return __WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_inherits___default()(PromptMessage,_PureComponent),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_helpers_createClass___default()(PromptMessage,[{key:"render",value:function render(){var prompt=this.props.prompt;return!!prompt&&__WEBPACK_IMPORTED_MODULE_5_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__BotBubble__.a,{message:prompt})}}]),PromptMessage}(__WEBPACK_IMPORTED_MODULE_5_react__.PureComponent);PromptMessage.propTypes={prompt:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.string,onSendMessage:__WEBPACK_IMPORTED_MODULE_6_prop_types___default.a.func.isRequired},__webpack_exports__.a=Object(__WEBPACK_IMPORTED_MODULE_11_redux__.d)(__WEBPACK_IMPORTED_MODULE_9__core_ConfigContext__.d,__WEBPACK_IMPORTED_MODULE_7_react_router_dom__.g,__WEBPACK_IMPORTED_MODULE_8__core_Frame__.b,__WEBPACK_IMPORTED_MODULE_12__core_ScreenContent__.withScreenContentSize,Object(__WEBPACK_IMPORTED_MODULE_13_react_redux__.b)(function(state){return{formFocused:Object(__WEBPACK_IMPORTED_MODULE_14__modules_app__.i)(state)}}))(PromptMessage),PromptMessage.__docgenInfo={description:"",displayName:"PromptMessage",props:{prompt:{type:{name:"string"},required:!1,description:""},onSendMessage:{type:{name:"func"},required:!0,description:""}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/chat/PromptMessage.jsx"]={name:"PromptMessage",docgenInfo:PromptMessage.__docgenInfo,path:"src/components/chat/PromptMessage.jsx"})},975:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__=__webpack_require__(29),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_entries__=__webpack_require__(494),__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_entries___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_entries__),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__=__webpack_require__(236),__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_extends__=__webpack_require__(7),__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_extends___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_extends__),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_slicedToArray__=__webpack_require__(86),__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_slicedToArray___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_slicedToArray__),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__=__webpack_require__(10),__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of__),__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__=__webpack_require__(5),__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck__),__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__=__webpack_require__(6),__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass__),__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__=__webpack_require__(8),__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn__),__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__=__webpack_require__(9),__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits__),__WEBPACK_IMPORTED_MODULE_10_react__=__webpack_require__(1),__WEBPACK_IMPORTED_MODULE_10_react___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_react__),__WEBPACK_IMPORTED_MODULE_11_immutable__=__webpack_require__(496),__WEBPACK_IMPORTED_MODULE_11_immutable___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_immutable__),__WEBPACK_IMPORTED_MODULE_12_prop_types__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_12_prop_types___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_12_prop_types__),__WEBPACK_IMPORTED_MODULE_13_react_redux__=__webpack_require__(55),__WEBPACK_IMPORTED_MODULE_14_redux__=__webpack_require__(126),__WEBPACK_IMPORTED_MODULE_15_react_intl__=__webpack_require__(74),__WEBPACK_IMPORTED_MODULE_16_lodash_cloneDeep__=__webpack_require__(550),__WEBPACK_IMPORTED_MODULE_16_lodash_cloneDeep___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_lodash_cloneDeep__),__WEBPACK_IMPORTED_MODULE_17__components_core_Block__=__webpack_require__(971),__WEBPACK_IMPORTED_MODULE_18__modules_chat__=__webpack_require__(85),__WEBPACK_IMPORTED_MODULE_19__components_core_ScreenContent__=__webpack_require__(972),__WEBPACK_IMPORTED_MODULE_20__modules_guest__=__webpack_require__(115),__WEBPACK_IMPORTED_MODULE_21__components_chat_PromptMessage__=__webpack_require__(2502),__WEBPACK_IMPORTED_MODULE_22__modules_info__=__webpack_require__(127),__WEBPACK_IMPORTED_MODULE_23__utils_common__=__webpack_require__(973),__WEBPACK_IMPORTED_MODULE_24__components_ui_Header__=__webpack_require__(2468),__WEBPACK_IMPORTED_MODULE_25__components_core_ConfigContext__=__webpack_require__(114),TicketForm=Object(__WEBPACK_IMPORTED_MODULE_10_react__.lazy)(function(){return __webpack_require__.e(215).then(__webpack_require__.bind(null,2254))}),transMessages={prompt:{id:"helpcenter.messenger.chat_prompt",defaultMessage:"What can we help you with today?"},preChatFormMessage:{id:"helpcenter.messenger.chat_pre_chat_form_form_message",defaultMessage:"Welcome to Deskpro. Please fill out the details below so we can direct you to the right person as quickly as possible."},blockHeader:{id:"helpcenter.messenger.chat_header_title",defaultMessage:"{department} conversation"},name:{id:"helpcenter.messenger.chat_pre_chat_form_name",defaultMessage:"Name"},email:{id:"helpcenter.messenger.chat_pre_chat_form_email",defaultMessage:"Email"},subject:{id:"helpcenter.widget.tickets_form_label_subject",defaultMessage:"Subject"},department:{id:"helpcenter.messenger.chat_pre_chat_form_department",defaultMessage:"Department"},message:{id:"helpcenter.messenger.tickets_form_message",defaultMessage:"Message"},product:{id:"helpcenter.messenger.tickets_form_product",defaultMessage:"Product"},priority:{id:"helpcenter.messenger.tickets_form_priority",defaultMessage:"Priority"},category:{id:"helpcenter.general.category",defaultMessage:"Category"},submit:{id:"helpcenter.messenger.tickets_form_submit",defaultMessage:"Submit"},addAttachment:{id:"helpcenter.messenger.tickets_form_add_attachment",defaultMessage:"Add attachment"},dragNDrop:{id:"helpcenter.general.drag_and_drop",defaultMessage:"Drag and drop"},or:{id:"helpcenter.messenger.tickets_form_or",defaultMessage:"or"},chooseAFile:{id:"helpcenter.general.form_choose_file",defaultMessage:"Choose a file"},chooseFiles:{id:"helpcenter.general.form_choose_files",defaultMessage:"Choose files"},select:{id:"helpcenter.messenger.tickets_form_select",defaultMessage:"Select"},back:{id:"helpcenter.messenger.tickets_form_back",defaultMessage:"Back"},required:{id:"helpcenter.messenger.tickets_form_required",defaultMessage:"Required"},loading:{id:"helpcenter.messenger.loading",defaultMessage:"Loading"}},StartChatScreen=function(_PureComponent){function StartChatScreen(){var _ref,_temp,_this,_ret;__WEBPACK_IMPORTED_MODULE_6_babel_runtime_helpers_classCallCheck___default()(this,StartChatScreen);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default()(this,(_ref=StartChatScreen.__proto__||__WEBPACK_IMPORTED_MODULE_5_babel_runtime_core_js_object_get_prototype_of___default()(StartChatScreen)).call.apply(_ref,[this].concat(args))),_this.state={viewMode:_this.props.preChatForm.length>0?"form":"prompt"},_this.promptMessage=_this.props.prompt?_this.props.intl.formatMessage(transMessages.prompt):null,_this.createChat=function(values){var meta=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_this$props=_this.props,createChat=_this$props.createChat,screenName=_this$props.screenName,user=_this$props.user,postData={fields:{}},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default()(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_entries___default()(values));!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref2=_step.value,_ref3=__WEBPACK_IMPORTED_MODULE_4_babel_runtime_helpers_slicedToArray___default()(_ref2,2),key=_ref3[0],value=_ref3[1];key.match(/^chat_field/)?postData.fields[key.split("_").splice(-1,1).join("")]=value:postData[key]=value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}createChat(postData,__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_extends___default()({fromScreen:screenName,name:user.name,email:user.email},meta))},_this.onSendMessage=function(message){var type=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"chat.message";if(message&&"chat.message"===type){var _this$props2=_this.props,department=_this$props2.department,user=_this$props2.user,messageModel=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_extends___default()({origin:"user",type:"chat.message"},"string"==typeof message?{message:message}:message);_this.createChat({chat_department:department,name:user.name,email:user.email},{message:messageModel})}},_ret=_temp,__WEBPACK_IMPORTED_MODULE_8_babel_runtime_helpers_possibleConstructorReturn___default()(_this,_ret)}return __WEBPACK_IMPORTED_MODULE_9_babel_runtime_helpers_inherits___default()(StartChatScreen,_PureComponent),__WEBPACK_IMPORTED_MODULE_7_babel_runtime_helpers_createClass___default()(StartChatScreen,[{key:"render",value:function render(){var _props=this.props,widget=_props.widget,agents=_props.agents,department=_props.department,departments=_props.departments,preChatForm=_props.preChatForm,user=_props.user,chatIsStarting=_props.chatIsStarting,_props2=this.props,maxHeight=_props2.contentSize.maxHeight,errors=_props2.errors,intl=_props2.intl,uploadTo=_props2.uploadTo,formMessageEnabled=_props2.formMessageEnabled,viewMode=this.state.viewMode,depsAvailable=[];for(var a in agents)agents.hasOwnProperty(a)&&agents[a].chat_departments.forEach(function(d){return depsAvailable.push(d)});var filteredDeps=__WEBPACK_IMPORTED_MODULE_11_immutable___default.a.fromJS(departments).filter(function(d){return-1!==depsAvailable.indexOf(d.get("id"))}).toJS(),dept=department&&filteredDeps[department]?filteredDeps[department]:{};dept.title||(dept=filteredDeps[__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(filteredDeps)[0]]);var initialValues=__WEBPACK_IMPORTED_MODULE_3_babel_runtime_helpers_extends___default()({},user),correctedForm=__WEBPACK_IMPORTED_MODULE_16_lodash_cloneDeep___default()(preChatForm),hiddenCount=0;correctedForm.length>0&&correctedForm[0].fields.forEach(function(f){"name"===f.field_id&&user.name&&(f.field_type="hidden",hiddenCount++),"email"===f.field_id&&user.email&&(f.field_type="hidden",hiddenCount++),"department"===f.field_type&&f.is_hidden&&hiddenCount++});var immutableLayout=Object(__WEBPACK_IMPORTED_MODULE_23__utils_common__.b)(correctedForm);return __WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_react__.Fragment,null,__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_24__components_ui_Header__.a,{icon:widget.icon.download_url}),__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_17__components_core_Block__.a,{className:"Block--chat",title:intl.formatMessage(transMessages.blockHeader,{department:dept.title}),style:{minHeight:isNaN(maxHeight)?void 0:maxHeight}},"form"===viewMode&&correctedForm[0].fields.length!==hiddenCount&&[formMessageEnabled&&__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement("div",{key:"form_message",className:"dpmsg-StartChatScreen-FormMessage"},intl.formatMessage(transMessages.preChatFormMessage)),__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10_react__.Suspense,{key:"start_chat_form_suspense",fallback:__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement("div",null,__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15_react_intl__.a,transMessages.loading),"...")},__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(TicketForm,{key:"start_chat_form",initialValues:initialValues,deskproLayout:immutableLayout,departmentPropName:"chat_department",departments:Object(__WEBPACK_IMPORTED_MODULE_23__utils_common__.b)(filteredDeps),department:department,fileUploadUrl:uploadTo,errors:errors,csrfToken:"not_used",onSubmit:this.createChat,submitDisabled:chatIsStarting,languageId:parseInt(this.props.language.id,10),i18n:{name:intl.formatMessage(transMessages.name),email:intl.formatMessage(transMessages.email),department:intl.formatMessage(transMessages.department),subject:intl.formatMessage(transMessages.subject),message:intl.formatMessage(transMessages.message),product:intl.formatMessage(transMessages.product),priority:intl.formatMessage(transMessages.priority),category:intl.formatMessage(transMessages.category),submit:intl.formatMessage(transMessages.submit),addAttachment:intl.formatMessage(transMessages.addAttachment),dragNDrop:intl.formatMessage(transMessages.dragNDrop),or:intl.formatMessage(transMessages.or),chooseAFile:intl.formatMessage(transMessages.chooseAFile),chooseFiles:intl.formatMessage(transMessages.chooseFiles),select:intl.formatMessage(transMessages.select),back:intl.formatMessage(transMessages.back),required:intl.formatMessage(transMessages.required)}}))],("prompt"===viewMode||"form"===viewMode&&correctedForm[0].fields.length===hiddenCount)&&__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_21__components_chat_PromptMessage__.a,{prompt:intl.formatMessage(transMessages.prompt),onSendMessage:this.onSendMessage})))}}]),StartChatScreen}(__WEBPACK_IMPORTED_MODULE_10_react__.PureComponent);StartChatScreen.propTypes={user:__WEBPACK_IMPORTED_MODULE_12_prop_types___default.a.object,language:__WEBPACK_IMPORTED_MODULE_12_prop_types___default.a.object,preChatForm:__WEBPACK_IMPORTED_MODULE_12_prop_types___default.a.array,prompt:__WEBPACK_IMPORTED_MODULE_12_prop_types___default.a.string,departments:__WEBPACK_IMPORTED_MODULE_12_prop_types___default.a.object.isRequired,agents:__WEBPACK_IMPORTED_MODULE_12_prop_types___default.a.object.isRequired,chatIsStarting:__WEBPACK_IMPORTED_MODULE_12_prop_types___default.a.bool},StartChatScreen.defaultProps={user:{},language:{},preChatForm:[],prompt:"",chatIsStarting:!1};__webpack_exports__.default=Object(__WEBPACK_IMPORTED_MODULE_14_redux__.d)(__WEBPACK_IMPORTED_MODULE_25__components_core_ConfigContext__.d,__WEBPACK_IMPORTED_MODULE_19__components_core_ScreenContent__.withScreenContentSize,Object(__WEBPACK_IMPORTED_MODULE_13_react_redux__.b)(function mapStateToProps(state,props){return{user:Object(__WEBPACK_IMPORTED_MODULE_20__modules_guest__.c)(state),departments:Object(__WEBPACK_IMPORTED_MODULE_22__modules_info__.h)(state,props),agents:Object(__WEBPACK_IMPORTED_MODULE_22__modules_info__.g)(state),chatIsStarting:Object(__WEBPACK_IMPORTED_MODULE_18__modules_chat__.f)(state),errors:Object(__WEBPACK_IMPORTED_MODULE_18__modules_chat__.o)(state)}},{createChat:__WEBPACK_IMPORTED_MODULE_18__modules_chat__.h,sendMessage:__WEBPACK_IMPORTED_MODULE_18__modules_chat__.v}),__WEBPACK_IMPORTED_MODULE_15_react_intl__.c)(StartChatScreen)}});